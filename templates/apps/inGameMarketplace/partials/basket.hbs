
<!-- Separate headers from basket items -->
<div class="grid basket-grid">
    <div class="grid-item header">{{localize "SR5.Marketplace.Name"}}</div>
    <div class="grid-item header">{{localize "SR5.Marketplace.system.technology.quantity"}}</div>
    <div class="grid-item header">{{localize "SR5.Marketplace.system.technology.rating"}}</div>
    <div class="grid-item header">{{localize "SR5.Marketplace.system.technology.Cost"}}</div>
    <div class="grid-item header">{{localize "SR5.Marketplace.system.karma"}}</div>
    <i class="fas fa-trash grid-item header" aria-label='{{localize "SR5.Marketplace.RemoveItem"}}'></i>
    {{#each items}}
        <a data-entity-link="Item" data-uuid="{{this.uuid}}">
            <div class="basket-item item-name">
                <img class="mini-img" src="{{this.image}}" alt="{{this.name}}">
                <tag class="item-tag">{{this.name}}</tag>
            </div>
        </a>
        <div class="basket-item item-quantity">
            <div id="{{this.basketId}}" data-basket-id="{{this.basketId}}" data-item-uuid="{{this.itemUuid}}" class="SR5-marketplace-plus-minus">
                <i class="fa-solid fa-circle-plus SR5-marketplace plus"></i>
            </div>
            <span>{{this.buyQuantity}}</span>
            {{#if (gt this.buyQuantity 1)}}
            <div id="{{this.basketId}}" data-basket-id="{{this.basketId}}" data-item-uuid="{{this.itemUuid}}" class="SR5-marketplace-plus-minus">
                <i class="fa-solid fa-circle-minus SR5-marketplace minus"></i>
            </div>
            {{/if}}
        </div>
        {{#if this.system.technology.rating}}
        <select class="item-rating" data-basket-id="{{this.basketId}}">
            {{#range 1 13}}
            <option value="{{this}}" {{#ifeq this ../selectedRating}}selected{{/ifeq}}>{{this}}</option>
            {{/range}}
        </select>
        {{/if}}
        <div class="basket-item item-cost">
            {{this.calculatedCost}} <i class="fa-duotone fa-solid fa-circle-yen"></i>
        </div>
        <div class="basket-item item-karma">
            {{this.calculatedKarma}} <i class="fa-duotone fa-solid fa-circle-star"></i>
        </div>
        <button class="remove-item" data-basket-id="{{this.basketId}}" data-item-uuid="{{this.basketId}}">
            <i class="fas fa-trash"></i>
        </button>
    {{/each}}
</div>

<!-- Summary for Cost and Availability -->
<div class="basket-summary">
    <div id="total-cost" class="sr5-marketplaceTotalCost">
        Total: {{totalCost}} <i class="fa-duotone fa-solid fa-circle-yen darkRed"></i>
    </div>
    <div id="total-availability" class="sr5-marketplaceTotalAvail">
        {{localize "SR5.Marketplace.TotalAvailability"}}: {{totalAvailability}}
    </div>
    {{#if totalKarma}}
    <div id="total-karma" class="sr5-marketplaceTotalKarma">
        {{localize "SR5.Marketplace.TotalKarma"}}: {{totalKarma}}
        <i class="fa-duotone fa-solid fa-circle-star yellow"></i>
    </div>
    {{/if}}
    {{#if totalEssenceCost}}
    <div id="total-essence" class="sr5-marketplaceTotalEssence">
        {{localize "SR5.Marketplace.TotalEssence"}}: {{totalEssenceCost}}
        <!--<i class="fa-duotone fa-solid fa-capsules red"></i>-->
    </div>
    {{/if}}
</div>

<!-- Buttons to send or cancel the request -->
<div class="basket-actions end-row">
    <button id="send-request-button" class="send-request-button">
        {{localize 'SR5.Marketplace.SendRequest'}}
    </button>
    <button id="cancel-request-button" class="send-request-button cancel">
        {{localize 'SR5.Marketplace.CancelRequest'}}
    </button>
</div>